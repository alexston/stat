<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>STAT HUB - 服务</title>
<link href="stylesheets/stat.css" rel="stylesheet" type="text/css" />
<script src="js/jquery-3.3.1.min.js" type="text/javascript"></script>
<script src="js/vue.min.js" type="text/javascript"></script>
<script src="js/vue-resource.min.js" type="text/javascript"></script>
<script src="js/common.js" type="text/javascript"></script>
</head>
<body>
	<div id="wrapper">

		<div id="header">
			<a href="/"><img src="images/stat.png" alt="Status" /></a>
		</div>

		<div id="content">
			<div class="hidden" id="statusmessage">&nbsp;</div>
			<div class="jive-contentBox">
				<table id="serviceinfo" cellpadding="3" cellspacing="0" border="0">
					<tbody>
						<tr>
							<td width="1%"></td>
							<td width="49%">
								<h3># 名称</h3>
								<h4>name: {{ service.name }}</h4>
							</td>
						</tr>
						<tr v-if="service.artifacts != null && service.artifacts.length > 0">
							<td></td>
							<td>
								<h3># 构建产物</h3>
								<h4>artifacts:</h4>
								<div v-for="artifact in service.artifacts">
									<div>
										&nbsp;&nbsp;- uri: {{ artifact.uri }}
									</div>
									<div v-if="artifact.path != null">
										&nbsp;&nbsp;&nbsp;&nbsp;path: {{ artifact.path }}
									</div>
									<div v-if="artifact.authorization != null">
										&nbsp;&nbsp;&nbsp;&nbsp;authorization: {{ artifact.authorization }}
									</div>
									<div v-if="artifact.userName != null">
										&nbsp;&nbsp;&nbsp;&nbsp;userName: {{ artifact.userName }}
									</div>
									<div v-if="artifact.password != null">
										&nbsp;&nbsp;&nbsp;&nbsp;password: {{ artifact.password }}
									</div>
								</div>
							</td>
						</tr>
						<tr v-if="service.runs != null && service.runs.length > 0">
							<td></td>
							<td>
								<h3># 运行</h3>
								<h4>runs:</h4>
								<div v-for="run in service.runs">
									<div>&nbsp;&nbsp;- {{ run }}</div>
								</div>
							</td>
						</tr>
						<tr>
							<td width="1%"></td>
							<td width="49%">
								<h3># 启动</h3>
								<div v-if="service.uid != null">
									uid: {{ service.uid }}
								</div>
								<div v-if="service.workDirectory != null">
									workDirectory: {{ service.workDirectory }}
								</div>
								<div v-if="service.command != null">
									command: {{ service.command }}
								</div>
							</td>
						</tr>
						<tr>
							<td width="1%"></td>
							<td width="49%">
								<h3># 停止</h3>
								<div v-if="service.stopSignal > 0">
									stopSignal: {{ service.stopSignal }}
								</div>
								<div v-if="service.stopGracePeriod > 0">
									stopGracePeriod: {{ service.stopGracePeriod }}
								</div>
							</td>
						</tr>
						<tr v-if="service.ports != null && service.ports.length > 0">
							<td></td>
							<td>
								<h3># 端口</h3>
								<h4>ports:</h4>
								<div v-for="port in service.ports">
									<div>&nbsp;&nbsp;- {{ port }}</div>
								</div>
							</td>
						</tr>
						<tr v-if="service.environment != null">
							<td></td>
							<td>
								<h3># 环境变量</h3>
								<h4>environment:</h4>
								<div v-for="(value, key) in service.environment">
									<div>&nbsp;&nbsp;{{ key }}: {{ value }}</div>
								</div>
							</td>
						</tr>
						<tr v-if="service.deploy != null">
							<td></td>
							<td>
								<h3># 部署</h3>
								<h4>deploy:</h4>
								<div>&nbsp;&nbsp;mode: {{ service.deploy.mode }}</div>
								<div>&nbsp;&nbsp;replicas: {{ service.deploy.replicas }}</div>
								<div v-if="service.deploy.placement != null">
									<h4>&nbsp;&nbsp;placement:</h4>
									<div v-if="service.deploy.placement.constraints != null && service.deploy.placement.constraints.length > 0">
										<h4>&nbsp;&nbsp;&nbsp;&nbsp;constraints:</h4>
										<div v-for="constraint in service.deploy.placement.constraints">
											<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- {{ constraint }}</div>
										</div>
									</div>
									<div v-if="service.deploy.placement.preferences != null && service.deploy.placement.preferences.length > 0">
										<h4>&nbsp;&nbsp;&nbsp;&nbsp;preferences:</h4>
										<div v-for="preference in service.deploy.placement.preferences">
											<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- {{ preference }}</div>
										</div>
									</div>
								</div>
								<div v-if="service.deploy.resources != null">
									<h4>&nbsp;&nbsp;resources:</h4>
									<div v-if="service.deploy.resources.limits != null">
										<h4>&nbsp;&nbsp;&nbsp;&nbsp;limits:</h4>
										<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpus: {{ service.deploy.resources.limits.cpus }}</div>
										<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memory: {{ service.deploy.resources.limits.memory }}</div>
									</div>
									<div v-if="service.deploy.resources.reservations != null">
										<h4>&nbsp;&nbsp;&nbsp;&nbsp;reservations:</h4>
										<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpus: {{ service.deploy.resources.reservations.cpus }}</div>
										<div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memory: {{ service.deploy.resources.reservations.memory }}</div>
									</div>
								</div>
							</td>
						</tr>
						<tr v-if="service.dependsOn != null && service.dependsOn.length > 0">
							<td></td>
							<td>
								<h3># 依赖</h3>
								<h4>dependsOn:</h4>
								<div v-for="e in service.dependsOn">
									<div>&nbsp;&nbsp;- {{ e }}</div>
								</div>
							</td>
						</tr>
						<tr v-if="service.healthCheck != null">
							<td></td>
							<td>
								<h3># 健康检查</h3>
								<h4>healthCheck:</h4>
								<div>&nbsp;&nbsp;enabled: {{ service.healthCheck.enabled }}</div>
								<div v-if="service.healthCheck.enabled">
									<div>&nbsp;&nbsp;startPeriod: {{ service.healthCheck.startPeriod }}</div>
									<div>&nbsp;&nbsp;interval: {{ service.healthCheck.interval }}</div>
									<div>&nbsp;&nbsp;retries: {{ service.healthCheck.retries }}</div>
									<div v-if="service.healthCheck.httpGet != null">
										<h4>&nbsp;&nbsp;httpGet:</h4>
										<div>&nbsp;&nbsp;&nbsp;&nbsp;protocol: {{ service.healthCheck.httpGet.protocol }}</div>
										<div>&nbsp;&nbsp;&nbsp;&nbsp;uri: {{ service.healthCheck.httpGet.uri }}</div>
										<div>&nbsp;&nbsp;&nbsp;&nbsp;portIndex: {{ service.healthCheck.httpGet.portIndex }}</div>
										<div>&nbsp;&nbsp;&nbsp;&nbsp;timeout: {{ service.healthCheck.httpGet.timeout }}</div>
									</div>
									<div v-if="service.healthCheck.command != null">
										<h4>&nbsp;&nbsp;command:</h4>
										<div>&nbsp;&nbsp;&nbsp;&nbsp;test: {{ service.healthCheck.command.test }}</div>
										<div>&nbsp;&nbsp;&nbsp;&nbsp;check: {{ service.healthCheck.command.check }}</div>
									</div>
								</div>
							</td>
						</tr>
						<tr v-if="service.labels != null && service.labels.length > 0">
							<td></td>
							<td>
								<h3># 标签</h3>
								<h4>labels:</h4>
								<div v-for="label in service.labels">
									<div>&nbsp;&nbsp;- {{ label }}</div>
								</div>
							</td>
						</tr>
						<tr v-if="service.logging != null">
							<td></td>
							<td>
								<h3># 日志</h3>
								<h4>logging:</h4>
								<div>&nbsp;&nbsp;driver: {{ service.logging.driver }}</div>
								<div v-if="service.logging.options != null">
								<h4>&nbsp;&nbsp;options:</h4>
								<div v-for="(value, key) in service.logging.options">
									<div>&nbsp;&nbsp;&nbsp;&nbsp;{{ key }}: {{ value }}</div>
								</div>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<br />
		<div class="push"></div>
	</div>

	<div id="footer" class="clr">
		<div class="left">
			<a href="/">STAT HUB</a> <span id="supervisor_version">#</span>
		</div>
		<div class="right">
			&amp;copy; 2006-<span id="copyright_date">#</span> <strong>lane.cn@gmail.com</strong>
		</div>
	</div>
	<script>
	var serviceInfo = new Vue({
		el : '#serviceinfo',
		data : {
			service: {}
		},
		methods : {
			loadData : function() {
				var serviceName = getParameter('name').name.replace('#', '');
				Vue.http.get('/api/v2/service/' + serviceName).then(function(ret) {
					serviceInfo.service = ret.body;
				});
			}
		}
	});
	serviceInfo.loadData();
	</script>
</body>
</html>
